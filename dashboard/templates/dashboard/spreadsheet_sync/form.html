{% extends 'dashboard/layout/base.html' %}
{% load i18n crispy_forms_tags %}

{% block page_title %}{% translate 'Spreadsheet Sync' %}{% endblock %}
{% block page_subtitle %}{% translate 'Event Data Sync' %}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-8">
    <div class="box">
      <div class="box-header with-border">
        <h3 class="box-title">{% translate 'Sincronizar eventos de una hoja de c√°lculo' %}</h3>
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        {% crispy form %}
      </div>
      <!-- /.box-body -->
    </div>
    <!-- /.box -->
  </div>
</div>
<!-- /.row -->

<div class="row mt-4">
  <div class="col-md-12">
    <div class="box">
      <div class="box-header with-border">
        <h3 class="box-title">{% translate 'Eventos sincronizados' %}</h3>
      </div>
      <div class="box-body">
        <table class="table table-hover table-condensed">
          <thead>
            <tr>
              <th>{% translate 'Evento' %}</th>
              <th>{% translate 'Creado' %}</th>
              <th>{% translate 'Error' %}</th>
              <th>{% translate 'Advertencias' %}</th>
            </tr>
          </thead>
          <tbody>
          {% for event_data in synced_events_data %}
            <tr>
              <td>
              {% if event_data.event %}
                <a href="{{ event_data.event.get_absolute_url }}" target="_blank" rel="noopener noreferrer">{{ event_data.event }}</a>
              {% else %}
                {{ event_data.title }}
              {% endif %}
              {% if event_data.source_id %} // {{ event_data.source_id }}{% endif %}
              </td>
              <td>
              {% if event_data.event %}
                {% if event_data.created %}
                  {% translate 'Creado' %}
                {% else %}
                  {% translate 'Actualizado' %}
                {% endif %}
              {% endif %}
              </td>
              <td>{{ event_data.error }}</td>
              <td>{{ event_data.warnings|join:" // " }}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <!-- /.box -->
  </div>
</div>
<!-- /.row -->

{% endblock content %}

{% block javascript %}
  {{ form.media }}
{% endblock javascript %}
