{% extends 'layout/base.html' %}
{% load i18n static desparchado_tags %}

{% block title %}{{ post.title }}{% endblock %}

{% block meta %}
  <meta property="og:title" content="{{ post.title }}">
  <meta property="og:description" content="{{ post.subtitle }}">
  <meta property="og:image" content="https://desparchado.co{{ post.get_image_url }}">

  <meta name="twitter:title" content="{{ post.title }}">
  <meta name="twitter:description" content="{{ post.subtitle.name }}">
{% endblock %}

{% block google-structured-markup %}
<!-- JSON-LD markup generated by Google Structured Data Markup Helper. -->
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Article",
  "name" : "{{ post.title }}",
  "headline" : "{{ post.title }}",
  "image" : "https://desparchado.co{{ post.get_image_url }}",
  "author" : {
    "@type" : "Person",
    "name" : "{{ post.get_author_name }}"
  },
  "publisher" : {
    "@type" : "Organization",
    "name" : "Desparchado.co",
    "logo" : "https://i.imgur.com/XKkUUZL.jpg"
  },
  "datePublished" : "{{ post.created|date:'c' }}"
}
</script>
{% endblock %}

{% block subheader %}
<section
  class="p-5 text-center bg-image page-img-title"
  style="
    background-image: url('{{ post.get_image_url }}');
    height: 400px;
  "
>
  <div class="mask" style="background-color: rgba(0, 0, 0, 0.6);">
    <div class="d-flex justify-content-center align-items-center h-100">
      <div class="text-white">
        <h1 class="mb-3 display-5 title">{{ post.title }}</h1>
        <h4 class="mb-3 subtitle">{{ post.subtitle }}</h4>
        <span class="meta">Publicado por
            <i>{{ post.get_author_name }}</i>
            el {{ post.created|date:'DATE_FORMAT' }}</span>
      </div>
    </div>
  </div>
</section>
{% endblock subheader %}

{% block content %}
  <div class="post-content">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        {{ post.content|markdown }}

        <div class="addthis_inline_share_toolbox"></div>
      </div>
    </div>
  </div>

  {% if post.related_events.exists %}
    <h4>Eventos relacionados</h4>
    {% include 'events/_events_grid.html' with events=post.related_events.all %}
  {% endif %}


{% endblock content %}
